import{S as T,i as z,s as A,F as D,d as R,t as w,a as q,m as S,c as y,h as g,C as E,D as G,l as v,n as d,E as I,G as N,v as k,u as m,w as p,p as P,H as F,I as j,A as h,f as B,k as H,o as M,q as J,z as L}from"./index-D49pSSYG.js";function K(u){let e,s,n,l,t,r,c,_,o,a,b,f;return l=new B({props:{class:"form-field required",name:"email",$$slots:{default:[Q,({uniqueId:i})=>({5:i}),({uniqueId:i})=>i?32:0]},$$scope:{ctx:u}}}),{c(){e=m("form"),s=m("div"),s.innerHTML='<h4 class="m-b-xs">忘记超级用户密码</h4> <p>请输入与您账号关联的邮箱，我们将向您发送恢复链接：</p>',n=k(),y(l.$$.fragment),t=k(),r=m("button"),c=m("i"),_=k(),o=m("span"),o.textContent="发送恢复链接",p(s,"class","content txt-center m-b-sm"),p(c,"class","ri-mail-send-line"),p(o,"class","txt"),p(r,"type","submit"),p(r,"class","btn btn-lg btn-block"),r.disabled=u[1],H(r,"btn-loading",u[1]),p(e,"class","m-b-base")},m(i,$){v(i,e,$),d(e,s),d(e,n),S(l,e,null),d(e,t),d(e,r),d(r,c),d(r,_),d(r,o),a=!0,b||(f=M(e,"submit",J(u[3])),b=!0)},p(i,$){const C={};$&97&&(C.$$scope={dirty:$,ctx:i}),l.$set(C),(!a||$&2)&&(r.disabled=i[1]),(!a||$&2)&&H(r,"btn-loading",i[1])},i(i){a||(q(l.$$.fragment,i),a=!0)},o(i){w(l.$$.fragment,i),a=!1},d(i){i&&g(e),R(l),b=!1,f()}}}function O(u){let e,s,n,l,t,r,c,_,o;return{c(){e=m("div"),s=m("div"),s.innerHTML='<i class="ri-checkbox-circle-line"></i>',n=k(),l=m("div"),t=m("p"),r=h("请检查 "),c=m("strong"),_=h(u[0]),o=h(" 获取恢复链接。"),p(s,"class","icon"),p(c,"class","txt-nowrap"),p(l,"class","content"),p(e,"class","alert alert-success")},m(a,b){v(a,e,b),d(e,s),d(e,n),d(e,l),d(l,t),d(t,r),d(t,c),d(c,_),d(t,o)},p(a,b){b&1&&j(_,a[0])},i:F,o:F,d(a){a&&g(e)}}}function Q(u){let e,s,n,l,t,r,c,_;return{c(){e=m("label"),s=h("邮箱"),l=k(),t=m("input"),p(e,"for",n=u[5]),p(t,"type","email"),p(t,"id",r=u[5]),t.required=!0,t.autofocus=!0},m(o,a){v(o,e,a),d(e,s),v(o,l,a),v(o,t,a),L(t,u[0]),t.focus(),c||(_=M(t,"input",u[4]),c=!0)},p(o,a){a&32&&n!==(n=o[5])&&p(e,"for",n),a&32&&r!==(r=o[5])&&p(t,"id",r),a&1&&t.value!==o[0]&&L(t,o[0])},d(o){o&&(g(e),g(l),g(t)),c=!1,_()}}}function U(u){let e,s,n,l,t,r,c,_;const o=[O,K],a=[];function b(f,i){return f[2]?0:1}return e=b(u),s=a[e]=o[e](u),{c(){s.c(),n=k(),l=m("div"),t=m("a"),t.textContent="返回登录",p(t,"href","/login"),p(t,"class","link-hint"),p(l,"class","content txt-center")},m(f,i){a[e].m(f,i),v(f,n,i),v(f,l,i),d(l,t),r=!0,c||(_=I(N.call(null,t)),c=!0)},p(f,i){let $=e;e=b(f),e===$?a[e].p(f,i):(E(),w(a[$],1,1,()=>{a[$]=null}),G(),s=a[e],s?s.p(f,i):(s=a[e]=o[e](f),s.c()),q(s,1),s.m(n.parentNode,n))},i(f){r||(q(s),r=!0)},o(f){w(s),r=!1},d(f){f&&(g(n),g(l)),a[e].d(f),c=!1,_()}}}function V(u){let e,s;return e=new D({props:{$$slots:{default:[U]},$$scope:{ctx:u}}}),{c(){y(e.$$.fragment)},m(n,l){S(e,n,l),s=!0},p(n,[l]){const t={};l&71&&(t.$$scope={dirty:l,ctx:n}),e.$set(t)},i(n){s||(q(e.$$.fragment,n),s=!0)},o(n){w(e.$$.fragment,n),s=!1},d(n){R(e,n)}}}function W(u,e,s){let n="",l=!1,t=!1;async function r(){if(!l){s(1,l=!0);try{await P.collection("_superusers").requestPasswordReset(n),s(2,t=!0)}catch(_){P.error(_)}s(1,l=!1)}}function c(){n=this.value,s(0,n)}return[n,l,t,r,c]}class Y extends T{constructor(e){super(),z(this,e,W,V,A,{})}}export{Y as default};
