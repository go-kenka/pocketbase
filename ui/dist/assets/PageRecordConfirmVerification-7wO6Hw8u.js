import{S as R,i as h,s as I,F as N,d as P,t as V,a as q,m as F,c as S,M as w,g as y,N as E,h as r,l as a,L as C,p as j,H as k,u as d,w as u,o as m,v,k as g,n as z}from"./index-D49pSSYG.js";function A(i){let e,l,n;function t(o,f){return o[4]?K:J}let s=t(i),c=s(i);return{c(){e=d("div"),e.innerHTML='<div class="icon"><i class="ri-error-warning-line"></i></div> <div class="content txt-bold"><p>验证令牌无效或已过期。</p></div>',l=v(),c.c(),n=C(),u(e,"class","alert alert-danger")},m(o,f){a(o,e,f),a(o,l,f),c.m(o,f),a(o,n,f)},p(o,f){s===(s=t(o))&&c?c.p(o,f):(c.d(1),c=s(o),c&&(c.c(),c.m(n.parentNode,n)))},d(o){o&&(r(e),r(l),r(n)),c.d(o)}}}function B(i){let e,l,n,t,s;return{c(){e=d("div"),e.innerHTML='<div class="icon"><i class="ri-checkbox-circle-line"></i></div> <div class="content txt-bold"><p>请检查您的邮箱获取新的验证链接。</p></div>',l=v(),n=d("button"),n.textContent="关闭",u(e,"class","alert alert-success"),u(n,"type","button"),u(n,"class","btn btn-transparent btn-block")},m(c,o){a(c,e,o),a(c,l,o),a(c,n,o),t||(s=m(n,"click",i[8]),t=!0)},p:k,d(c){c&&(r(e),r(l),r(n)),t=!1,s()}}}function D(i){let e,l,n,t,s;return{c(){e=d("div"),e.innerHTML='<div class="icon"><i class="ri-checkbox-circle-line"></i></div> <div class="content txt-bold"><p>邮箱地址验证成功。</p></div>',l=v(),n=d("button"),n.textContent="关闭",u(e,"class","alert alert-success"),u(n,"type","button"),u(n,"class","btn btn-transparent btn-block")},m(c,o){a(c,e,o),a(c,l,o),a(c,n,o),t||(s=m(n,"click",i[7]),t=!0)},p:k,d(c){c&&(r(e),r(l),r(n)),t=!1,s()}}}function G(i){let e;return{c(){e=d("div"),e.innerHTML='<div class="loader loader-lg"><em>请稍候...</em></div>',u(e,"class","txt-center")},m(l,n){a(l,e,n)},p:k,d(l){l&&r(e)}}}function J(i){let e,l,n;return{c(){e=d("button"),e.textContent="关闭",u(e,"type","button"),u(e,"class","btn btn-transparent btn-block")},m(t,s){a(t,e,s),l||(n=m(e,"click",i[9]),l=!0)},p:k,d(t){t&&r(e),l=!1,n()}}}function K(i){let e,l,n,t;return{c(){e=d("button"),l=d("span"),l.textContent="重新发送",u(l,"class","txt"),u(e,"type","button"),u(e,"class","btn btn-transparent btn-block"),e.disabled=i[3],g(e,"btn-loading",i[3])},m(s,c){a(s,e,c),z(e,l),n||(t=m(e,"click",i[5]),n=!0)},p(s,c){c&8&&(e.disabled=s[3]),c&8&&g(e,"btn-loading",s[3])},d(s){s&&r(e),n=!1,t()}}}function O(i){let e;function l(s,c){return s[1]?G:s[0]?D:s[2]?B:A}let n=l(i),t=n(i);return{c(){t.c(),e=C()},m(s,c){t.m(s,c),a(s,e,c)},p(s,c){n===(n=l(s))&&t?t.p(s,c):(t.d(1),t=n(s),t&&(t.c(),t.m(e.parentNode,e)))},d(s){s&&r(e),t.d(s)}}}function Q(i){let e,l;return e=new N({props:{nobranding:!0,$$slots:{default:[O]},$$scope:{ctx:i}}}),{c(){S(e.$$.fragment)},m(n,t){F(e,n,t),l=!0},p(n,[t]){const s={};t&2079&&(s.$$scope={dirty:t,ctx:n}),e.$set(s)},i(n){l||(q(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){P(e,n)}}}function U(i,e,l){let n,{params:t}=e,s=!1,c=!1,o=!1,f=!1;T();async function T(){if(c)return;l(1,c=!0);const b=new w("../");try{const p=y(t==null?void 0:t.token);await b.collection(p.collectionId).confirmVerification(t==null?void 0:t.token),l(0,s=!0)}catch{l(0,s=!1)}l(1,c=!1)}async function x(){const b=y(t==null?void 0:t.token);if(f||!b.collectionId||!b.email)return;l(3,f=!0);const p=new w("../");try{const _=y(t==null?void 0:t.token);await p.collection(_.collectionId).requestVerification(_.email),l(2,o=!0)}catch(_){j.error(_),l(2,o=!1)}l(3,f=!1)}const H=()=>window.close(),L=()=>window.close(),M=()=>window.close();return i.$$set=b=>{"params"in b&&l(6,t=b.params)},i.$$.update=()=>{i.$$.dirty&64&&l(4,n=(t==null?void 0:t.token)&&E(t.token))},[s,c,o,f,n,x,t,H,L,M]}class X extends R{constructor(e){super(),h(this,e,U,Q,I,{params:6})}}export{X as default};
