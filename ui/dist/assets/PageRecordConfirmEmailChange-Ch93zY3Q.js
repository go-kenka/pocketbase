import{S as M,i as S,s as z,F as A,d as T,t as v,a as h,m as I,c as J,J as D,h as m,D as N,l as b,L as R,M as W,g as j,p as B,H as q,o as E,u as _,v as C,w as d,f as G,k as F,n as k,q as K,A as y,I as O,z as H,C as Q}from"./index-D49pSSYG.js";function U(i){let e,t,l,n,s,o,f,a,r,u,g,w,p=i[3]&&L(i);return o=new G({props:{class:"form-field required",name:"password",$$slots:{default:[X,({uniqueId:c})=>({8:c}),({uniqueId:c})=>c?256:0]},$$scope:{ctx:i}}}),{c(){e=_("form"),t=_("div"),l=_("h5"),n=y(`请输入密码以确认变更邮箱地址\r
                    `),p&&p.c(),s=C(),J(o.$$.fragment),f=C(),a=_("button"),r=_("span"),r.textContent="确认新邮箱",d(t,"class","content txt-center m-b-base"),d(r,"class","txt"),d(a,"type","submit"),d(a,"class","btn btn-lg btn-block"),a.disabled=i[1],F(a,"btn-loading",i[1])},m(c,$){b(c,e,$),k(e,t),k(t,l),k(l,n),p&&p.m(l,null),k(e,s),I(o,e,null),k(e,f),k(e,a),k(a,r),u=!0,g||(w=E(e,"submit",K(i[4])),g=!0)},p(c,$){c[3]?p?p.p(c,$):(p=L(c),p.c(),p.m(l,null)):p&&(p.d(1),p=null);const P={};$&769&&(P.$$scope={dirty:$,ctx:c}),o.$set(P),(!u||$&2)&&(a.disabled=c[1]),(!u||$&2)&&F(a,"btn-loading",c[1])},i(c){u||(h(o.$$.fragment,c),u=!0)},o(c){v(o.$$.fragment,c),u=!1},d(c){c&&m(e),p&&p.d(),T(o),g=!1,w()}}}function V(i){let e,t,l,n,s;return{c(){e=_("div"),e.innerHTML='<div class="icon"><i class="ri-checkbox-circle-line"></i></div> <div class="content txt-bold"><p>用户邮箱地址已成功变更。</p> <p>您现在可以使用新的邮箱地址登录。</p></div>',t=C(),l=_("button"),l.textContent="关闭",d(e,"class","alert alert-success"),d(l,"type","button"),d(l,"class","btn btn-transparent btn-block")},m(o,f){b(o,e,f),b(o,t,f),b(o,l,f),n||(s=E(l,"click",i[6]),n=!0)},p:q,i:q,o:q,d(o){o&&(m(e),m(t),m(l)),n=!1,s()}}}function L(i){let e,t,l;return{c(){e=y("为 "),t=_("strong"),l=y(i[3]),d(t,"class","txt-nowrap")},m(n,s){b(n,e,s),b(n,t,s),k(t,l)},p(n,s){s&8&&O(l,n[3])},d(n){n&&(m(e),m(t))}}}function X(i){let e,t,l,n,s,o,f,a;return{c(){e=_("label"),t=y("密码"),n=C(),s=_("input"),d(e,"for",l=i[8]),d(s,"type","password"),d(s,"id",o=i[8]),s.required=!0,s.autofocus=!0},m(r,u){b(r,e,u),k(e,t),b(r,n,u),b(r,s,u),H(s,i[0]),s.focus(),f||(a=E(s,"input",i[7]),f=!0)},p(r,u){u&256&&l!==(l=r[8])&&d(e,"for",l),u&256&&o!==(o=r[8])&&d(s,"id",o),u&1&&s.value!==r[0]&&H(s,r[0])},d(r){r&&(m(e),m(n),m(s)),f=!1,a()}}}function Y(i){let e,t,l,n;const s=[V,U],o=[];function f(a,r){return a[2]?0:1}return e=f(i),t=o[e]=s[e](i),{c(){t.c(),l=R()},m(a,r){o[e].m(a,r),b(a,l,r),n=!0},p(a,r){let u=e;e=f(a),e===u?o[e].p(a,r):(Q(),v(o[u],1,1,()=>{o[u]=null}),N(),t=o[e],t?t.p(a,r):(t=o[e]=s[e](a),t.c()),h(t,1),t.m(l.parentNode,l))},i(a){n||(h(t),n=!0)},o(a){v(t),n=!1},d(a){a&&m(l),o[e].d(a)}}}function Z(i){let e,t;return e=new A({props:{nobranding:!0,$$slots:{default:[Y]},$$scope:{ctx:i}}}),{c(){J(e.$$.fragment)},m(l,n){I(e,l,n),t=!0},p(l,[n]){const s={};n&527&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(h(e.$$.fragment,l),t=!0)},o(l){v(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}function x(i,e,t){let l,{params:n}=e,s="",o=!1,f=!1;async function a(){if(o)return;t(1,o=!0);const g=new W("../");try{const w=j(n==null?void 0:n.token);await g.collection(w.collectionId).confirmEmailChange(n==null?void 0:n.token,s),t(2,f=!0)}catch(w){B.error(w)}t(1,o=!1)}const r=()=>window.close();function u(){s=this.value,t(0,s)}return i.$$set=g=>{"params"in g&&t(5,n=g.params)},i.$$.update=()=>{i.$$.dirty&32&&t(3,l=D.getJWTPayload(n==null?void 0:n.token).newEmail||"")},[s,o,f,l,a,n,r,u]}class te extends M{constructor(e){super(),S(this,e,x,Z,z,{params:5})}}export{te as default};
