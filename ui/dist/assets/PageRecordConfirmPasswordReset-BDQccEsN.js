import{S as D,i as N,s as W,F as j,d as R,t as P,a as q,m as T,c as I,J as B,h as m,C as E,D as G,l as b,L as K,M as O,g as Q,p as U,H as L,o as F,u as _,v as C,w as p,f as S,k as z,n as $,q as V,A as H,I as X,z as y}from"./index-D49pSSYG.js";function Y(a){let e,l,t,s,n,o,c,r,i,u,v,k,w,h,d=a[4]&&A(a);return o=new S({props:{class:"form-field required",name:"password",$$slots:{default:[x,({uniqueId:f})=>({10:f}),({uniqueId:f})=>f?1024:0]},$$scope:{ctx:a}}}),r=new S({props:{class:"form-field required",name:"passwordConfirm",$$slots:{default:[ee,({uniqueId:f})=>({10:f}),({uniqueId:f})=>f?1024:0]},$$scope:{ctx:a}}}),{c(){e=_("form"),l=_("div"),t=_("h5"),s=H(`重置用户密码\r
                    `),d&&d.c(),n=C(),I(o.$$.fragment),c=C(),I(r.$$.fragment),i=C(),u=_("button"),v=_("span"),v.textContent="设置新密码",p(l,"class","content txt-center m-b-base"),p(v,"class","txt"),p(u,"type","submit"),p(u,"class","btn btn-lg btn-block"),u.disabled=a[2],z(u,"btn-loading",a[2])},m(f,g){b(f,e,g),$(e,l),$(l,t),$(t,s),d&&d.m(t,null),$(e,n),T(o,e,null),$(e,c),T(r,e,null),$(e,i),$(e,u),$(u,v),k=!0,w||(h=F(e,"submit",V(a[5])),w=!0)},p(f,g){f[4]?d?d.p(f,g):(d=A(f),d.c(),d.m(t,null)):d&&(d.d(1),d=null);const J={};g&3073&&(J.$$scope={dirty:g,ctx:f}),o.$set(J);const M={};g&3074&&(M.$$scope={dirty:g,ctx:f}),r.$set(M),(!k||g&4)&&(u.disabled=f[2]),(!k||g&4)&&z(u,"btn-loading",f[2])},i(f){k||(q(o.$$.fragment,f),q(r.$$.fragment,f),k=!0)},o(f){P(o.$$.fragment,f),P(r.$$.fragment,f),k=!1},d(f){f&&m(e),d&&d.d(),R(o),R(r),w=!1,h()}}}function Z(a){let e,l,t,s,n;return{c(){e=_("div"),e.innerHTML='<div class="icon"><i class="ri-checkbox-circle-line"></i></div> <div class="content txt-bold"><p>用户密码修改成功。</p> <p>您现在可以使用新密码登录。</p></div>',l=C(),t=_("button"),t.textContent="关闭",p(e,"class","alert alert-success"),p(t,"type","button"),p(t,"class","btn btn-transparent btn-block")},m(o,c){b(o,e,c),b(o,l,c),b(o,t,c),s||(n=F(t,"click",a[7]),s=!0)},p:L,i:L,o:L,d(o){o&&(m(e),m(l),m(t)),s=!1,n()}}}function A(a){let e,l;return{c(){e=_("strong"),l=H(a[4])},m(t,s){b(t,e,s),$(e,l)},p(t,s){s&16&&X(l,t[4])},d(t){t&&m(e)}}}function x(a){let e,l,t,s,n,o,c,r;return{c(){e=_("label"),l=H("新密码"),s=C(),n=_("input"),p(e,"for",t=a[10]),p(n,"type","password"),p(n,"id",o=a[10]),n.required=!0,n.autofocus=!0},m(i,u){b(i,e,u),$(e,l),b(i,s,u),b(i,n,u),y(n,a[0]),n.focus(),c||(r=F(n,"input",a[8]),c=!0)},p(i,u){u&1024&&t!==(t=i[10])&&p(e,"for",t),u&1024&&o!==(o=i[10])&&p(n,"id",o),u&1&&n.value!==i[0]&&y(n,i[0])},d(i){i&&(m(e),m(s),m(n)),c=!1,r()}}}function ee(a){let e,l,t,s,n,o,c,r;return{c(){e=_("label"),l=H("确认新密码"),s=C(),n=_("input"),p(e,"for",t=a[10]),p(n,"type","password"),p(n,"id",o=a[10]),n.required=!0},m(i,u){b(i,e,u),$(e,l),b(i,s,u),b(i,n,u),y(n,a[1]),c||(r=F(n,"input",a[9]),c=!0)},p(i,u){u&1024&&t!==(t=i[10])&&p(e,"for",t),u&1024&&o!==(o=i[10])&&p(n,"id",o),u&2&&n.value!==i[1]&&y(n,i[1])},d(i){i&&(m(e),m(s),m(n)),c=!1,r()}}}function te(a){let e,l,t,s;const n=[Z,Y],o=[];function c(r,i){return r[3]?0:1}return e=c(a),l=o[e]=n[e](a),{c(){l.c(),t=K()},m(r,i){o[e].m(r,i),b(r,t,i),s=!0},p(r,i){let u=e;e=c(r),e===u?o[e].p(r,i):(E(),P(o[u],1,1,()=>{o[u]=null}),G(),l=o[e],l?l.p(r,i):(l=o[e]=n[e](r),l.c()),q(l,1),l.m(t.parentNode,t))},i(r){s||(q(l),s=!0)},o(r){P(l),s=!1},d(r){r&&m(t),o[e].d(r)}}}function le(a){let e,l;return e=new j({props:{nobranding:!0,$$slots:{default:[te]},$$scope:{ctx:a}}}),{c(){I(e.$$.fragment)},m(t,s){T(e,t,s),l=!0},p(t,[s]){const n={};s&2079&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(q(e.$$.fragment,t),l=!0)},o(t){P(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function ne(a,e,l){let t,{params:s}=e,n="",o="",c=!1,r=!1;async function i(){if(c)return;l(2,c=!0);const w=new O("../");try{const h=Q(s==null?void 0:s.token);await w.collection(h.collectionId).confirmPasswordReset(s==null?void 0:s.token,n,o),l(3,r=!0)}catch(h){U.error(h)}l(2,c=!1)}const u=()=>window.close();function v(){n=this.value,l(0,n)}function k(){o=this.value,l(1,o)}return a.$$set=w=>{"params"in w&&l(6,s=w.params)},a.$$.update=()=>{a.$$.dirty&64&&l(4,t=B.getJWTPayload(s==null?void 0:s.token).email||"")},[n,o,c,r,t,i,s,u,v,k]}class oe extends D{constructor(e){super(),N(this,e,ne,le,W,{params:6})}}export{oe as default};
